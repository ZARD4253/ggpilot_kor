import json
import unicodedata
from bs4 import BeautifulSoup

# 문자열 정규화
def normalize(text):
    return unicodedata.normalize("NFC", text).strip()

# 태그 번역
tagTranslations = {
    "宇宙世紀シリーズ": "우주세기 시리즈",
  "オルタナティブシリーズ": "얼터너티브 시리즈",
  "主人公": "주인공",
  "ライバル": "라이벌",
  "地球連邦軍(宇宙世紀)": "지구연방군(우주세기)",
  "ジオン公国軍": "지온공국군",
  "エゥーゴ": "에우고",
  "ティターンズ": "티탄즈",
  "アクシズ": "악시즈",
  "ネオ・ジオン": "네오 지온",
  "地球連合軍": "지구연합군",
  "ザフト": "자프트",
  "オーブ": "오브",
  "三隻同盟": "삼척동맹",
  "SDガンダム": "SD건담",
  "GGENERATIONシリーズ": "G제네레이션 시리즈",
  "SEEDシリーズ": "SEED 시리즈",
  "マスク": "마스크",
  "民間人": "민간인",
  "軍人": "군인",
  "ルーキー": "루키",
  "ベテラン": "베테랑",
  "リーダー": "리더",
  "ガンダムパイロット": "건담 파일럿",
  "モノアイパイロット": "모노아이 파일럿",
  "モビルアーマーパイロット": "모빌아머 파일럿",
  "可変機パイロット": "가변기 파일럿",
  "ニュータイプ": "뉴타입",
  "身体強化": "신체강화",
  "コーディネイター": "코디네이터"
}

# 시리즈 번역 (정규화 적용)
seriesTranslations = {}
pairs = [
    ("機動戦士ガンダム", "기동전사 건담"),
  ( "エコール・デュ・シエル 天空の学校", "에코르 듀 시엘 천사의학교"),
      ("機動戦士Zガンダム","기동전사 Z 건담"),  
  ("機動戦士Zガンダム A New Translation", "기동전사 Z건담 A New Translation"),
  ("機動戦士ガンダムZZ", "기동전사 건담ZZ"),
  ("逆襲のシャア", "역습의 샤아"),
  ("機動戦士ガンダムUC", "기동전사 건담UC"),
  ("MSV-R ジョニー・ライデンの帰還","MSV-R 조니 라이덴의 귀환"),
  ("機動武闘伝Gガンダム", "G건담"),
  ("新機動戦記ガンダムW", "건담W"),
  ("機動新世紀ガンダムX", "건담X"),
  ("W デュアルストーリー G-UNIT","W 듀얼스토리 G-UNIT"),
  ("ガンダム00P","건담00P"),
    ("ガンダム00I","건담00I"),
	 ("ガンダム00V","건담00V"),
	 ("新機動戦記ガンダムW Endless Waltz","건담W Endless Waltz"),
	 ("機動戦士Gundam GQuuuuuuX","Gundam GQuuuuuuX"),
	 ("ギレンの野望","기렌의야망"),
	 ("水星の魔女 PROLOGUE","수성의마녀 PROLOGUE"),
	 ("ビルドファイターズ","빌드파이터즈"),
  ("機動戦士ガンダムSEED", "기동전사 건담SEED"),
  ("機動戦士ガンダムSEED DESTINY", "기동전사 건담SEED DESTINY"),
  ("機動戦士ガンダム00", "기동전사 건담00"),
  ("鉄血のオルフェンズ", "멈추전사 칩펀스"),
  ("水星の魔女", "수성의 마녀"),
  ("機動戦士クロスボーン・ガンダム", "크로스본 건담"),
  ("G GENERATIONシリーズ", "G제네 시리즈"),
  ("機動戦士ガンダム カタナ", "기동전사 건담 카타나"),
  ("THE ORIGIN", "THE ORIGIN"),
  ("MS IGLOO", "MS IGLOO"),
  ("MS IGLOO 603", "MS IGLOO 603"),
  ("MS IGLOO2 重力戦線", "MS IGLOO2 중력전선"),
  ("第08MS小隊", "08MS 소대"),
  ("CROSS DIMENSION 0079", "CROSS DIMENSION 0079"),
  ("ガンダム外伝 THE BLUE DESTINY", "건담 외전 THE BLUE DESTINY"),
  ("ガンダム外伝 ザ・ブルー・ディスティニー", "건담 외전 더 블루 데스티니"),
  ("ガンダム戦記 Lost War Chronicles", "건담전기 Lost War Chronicles"),
  ("ガンダム外伝 ミッシングリンク", "건담 외전 미싱 링크"),
  ("サンダーボルト", "썬더볼트"),
  ("0080 ポケットの中の戦争", "0080 주머니 속의 전쟁"),
  ("0083 STARDUST MEMORY", "0083 STARDUST MEMORY"),
  ("鉄血のオルフェンズ 月鋼","칩펀스 월강"),
  ("0083 REBELLION", "0083 REBELLION"),
  ("機動戦士ガンダムNT", "기동전사 건담 NT"),
  ("機動戦士ガンダムF90", "기동전사 건담F90"),
  ("機動戦士Vガンダム", "V건담"),
  ("∀ガンダム", "턴에이 건담"),
  ("SDガンダム外伝 ジークジオン編","SD건담외전 지크지온편"),
  ("機動戦士ガンダムF91", "기동전사 건담F91"),
  ("模型戦士ガンプラビルダーズ ビギニング","모형전사 건프라빌더즈 비기닝"),
  ("Endless Waltz 敗者たちの栄光", "Endless Waltz 패자의 영광"),
  ("閃光のハサウェイ", "섬광의하사웨이")
]
for jp, kr in pairs:
    seriesTranslations[normalize(jp)] = kr

# 소스 번역
nameTypeTranslations = {
    "ガシャ": "가챠산",
    "スカウト": "스카우트",
    "配布": "배포"
}

# 스킬 번역
skillTranslations = {
      "フォースガード": "포스가드",
  "ハイスピード": "고속",
  "スウェー": "스웨이",
  "アタックバースト": "어택버스트",
  "HPリペア": "HP리페어",
  "ENチャージ": "EN 차지",
  "ENセーブ": "EN세이브",
  "レンジブースト": "레인지부스트",
  "ロックオン": "록온",
  "クリティカルブースト": "크리티컬부스트",
  "MPアップ": "MP업",
  "MPアップ(範囲)": "MP업(MAP)",
  "覚醒ブースト": "각성부스트",
  "命中率・回避率上昇": "명중률 회피율 상승",
  "格闘ブースト": "격투부스트",
  "射撃ブースト": "사격부스트",
  "チャンスステップ回数増加": "찬스스탭 증가",
  "支援攻撃回数増加": "지원공격 횟수 증가",
  "支援防御回数増加": "지원방어 횟수 증가",
  "アタックバースト(範囲)":"어택버스트(MAP)"
}
    # ── 어빌리티 ────
abilityTranslations = {
    "「支援防御」": "「지원방어」",
    "【耐久型タイプ】": "【내구형타입】",
    "搭乗ユニットが上記の": "탑승 유닛이 상기의",
    "「タイプ」": "「타입」",
    "支援型タイプ": "지원형타입",
    "を含む時": "을(를) 포함할때",
    "を含む": "을(를) 포함하면",
    "自身が支援防御時": "자신이 지원방어시",
    "自身の防御力が": "자신의 방어력이",
    "上昇": "상승",
    "自身の覚醒値と反応値が": "자신의 각성치와 반응치가",
    "ニュータイプ": "뉴타입",
    "EXキャラアビリティ": "EX캐릭 어빌리티",
    "【地球連邦軍(宇宙世紀)】": "【지구연방군(우주세기)】",
    "敵への与ダメージが": "적에게 주는 데미지가",
    "自身の被ダメージが": "자신이 받는 데미지가",
    "軽減": "감소",
    "自身が支援攻撃、支援反撃時": "자신이 지원공격、지원반격시",
    "自身の武装の消費": "자신의 무장의 소비",
    "ENが": "EN이",
    "「タグ」": "「태그」",
    "自身の覚醒値が": "자신의 각성치가",
    "「支援攻撃/反撃」": "「지원공격/반격」",
    "「チャンスステップ」": "「찬스스텝」",
    "【ネオ・ジオン】": "【네오지온】",
    "自身の命中率と回避率が": "자신의 명중률과 회피율이",
    "覚醒値上昇": "각성치 상승",
    "自身の守備値が": "자신의 수비치가",
    "守備値上昇": "수비치 상승",
    "【宇宙海賊クロスボーン・バンガード】": "【우주해적 크로스본 뱅가드】",
    "【ソレスタルビーイング】": "【솔레스탈빙】",
    "自身の射撃値が": "자신의 사격치가",  # 그대로 유지
    "格闘値上昇": "격투치 상승",
    "自身のMPが": "자신의 MP가",
    "射撃値": "사격치",
    "エゥーゴ": "에우고",
    "格闘値": "격투치",
    "自身の격투치が": "자신의 격투치가",  # 그대로 유지
    "自身の与ダメージが": "자신이 주는 데미지가",
    "与ダメージ": "주는 데미지",
    "＋1回": "＋1회",
    "+1回": "+1회",
    "수비치이": "수비치가",
    "【三隻同盟】": "【삼척동맹】",
    "支援防御": "지원방어",
    "相性：阿頼耶識": "상성: 아롸야식",
    "【阿頼耶識システム】": "【아롸야식 시스템】",
    "自身のクリティカル率が": "자신의 크리트컬율이",
    "敵へのダメージが": "적에게 주는데미지가",
    "支援攻撃/支援反撃": "지원공격/지원반격",
    "かつ": "AND",
    "搭乗ユニットが上記": "탑승유닛이 상기",
    "自身への被ダメージが": "적에게 받는 데미지가",
    "減少": "감소",
    "毎ターン開始時": "매 턴 시작시",
    "自身の": "자신의",
    "回復": "회복",
    "HPが": "HP가",
    "相性：": "상성：",
    "イノベイド": "이노베이드",
    "守備値と反応値が": "수비치와 반응치가",
    "「シリーズ」": "「시리즈」",
    "を": "을(를)",
    "登場ユニットが上記の": "탐승한 유닛이 상기의",
    "「シリーズ/タグ」": "「시리즈/태그」",
    "反応値が": "반응치가",
    
    
    # --- 캐릭터 태그 ---
     "宇宙世紀シリーズ": "우주세기 시리즈",
  "オルタナティブシリーズ": "얼터너티브 시리즈",
  "主人公": "주인공",
  "ライバル": "라이벌",
  "地球連邦軍(宇宙世紀)": "지구연방군(우주세기)",
  "ジオン公国軍": "지온공국군",
  "エゥーゴ": "에우고",
  "ティターンズ": "티탄즈",
  "アクシズ": "악시즈",
  "ネオ・ジオン": "네오 지온",
  "地球連合軍": "지구연합군",
  "ザフト": "자프트",
  "オーブ": "오브",
  "三隻同盟": "삼척동맹",
  "SDガンダム": "SD건담",
  "GGENERATIONシリーズ": "G제네레이션 시리즈",
  "SEEDシリーズ": "SEED 시리즈",
  "マスク": "마스크",
  "民間人": "민간인",
  "軍人": "군인",
  "ルーキー": "루키",
  "ベテラン": "베테랑",
  "リーダー": "리더",
  "ガンダムパイロット": "건담 파일럿",
  "モノアイパイロット": "모노아이 파일럿",
  "モビルアーマーパイロット": "모빌아머 파일럿",
  "可変機パイロット": "가변기 파일럿",
  "ニュータイプ": "뉴타입",
  "身体強化": "신체강화",
  "コーディネイター": "코디네이터",




	
	
    # --- 태그 그룹 1 ---
    "宇宙世紀シリーズ": "우주세기 시리즈",
    "オルタナティブシリーズ": "얼터너티브",
    "主人公": "주인공",
    "ライバル": "라이벌",
    "可変機": "가변형",
    "モビルアーマー": "모빌아머",
    "ガンダム": "건담",
    "モノアイ": "모노아이",
    "GGENERATIONシリーズ": "GGENERATION시리즈",

    # --- 태그 그룹 2 ---
    "ニュータイプ専用機": "뉴타입전용기",
    "エース機": "에이스기",
    "試作機": "시작기",
    "専用機": "전용기",
    "指揮官機": "지휘관기",
    "大型機": "대형기",

    # --- 태그 그룹 3 ---
    "一撃必殺": "일격필살",
    "電光石火": "전광석화",
    "堅牢": "견고",
    "突破力": "돌파력",
    "サイコミュ": "사이코뮤",

    # --- 태그 그룹 4 ---
    "赤色": "빨간색",
    "金色": "금색",
    "白色": "흰색",
    "黒色": "검은색",
    "ザク": "자쿠",
    "ジム": "짐",
    "水中用": "수중용",
    "空中用": "공중용",
    "量産機": "양산기",

    # --- 태그 그룹 5 ---
    "地球連邦軍(宇宙世紀)": "지구연방군(우주세기)",
    "ジオン公国軍": "지온공국군",
    "SEEDシリーズ": "SEED시리즈",
    "ザフト": "자프트",
    "AEU": "AEU",
    "ALICE": "ALICE",
    "GUND-ARM": "GUND-ARM",
    "MO-V": "MO-V",
    "NT-D": "NT-D",
    "OZ": "OZ",
    "Wシリーズ": "W시리즈",
    "アクシズ": "액시즈",
    "阿頼耶識システム": "아뢰야식시스템",
    "アロウズ": "어로우즈",
    "宇宙海賊クロスボーン・バンガード": "우주해적 크로스본・뱅가드",
    "宇宙革命軍": "우주혁명군",
    "エゥーゴ": "에우고",
    "オーブ": "오브",
    "オペレーション・メテオ": "오페레이션 메테오",
    "各国代表": "각국대표",
    "ガンプラ": "건프라",
    "キャピタル・アーミィ": "캐피털 아미",
    "ギャラルホルン": "걀라르호른",
    "強敵襲来": "강적습격",
    "国連軍": "UN군",
    "サーペントテール": "서펜트 테일",
    "サンクキングダム": "생크 킹덤",
    "ザンスカール帝国": "잔스칼 제국",
    "三隻同盟": "삼척동맹",
    "ジャンク屋組合": "정크 길드",
    "人類革新連盟": "인류 혁신 연맹",
    "ゼロシステム": "제로 시스템",
    "ソレスタルビーイング": "솔레스탈 비잉",
    "タービンズ": "터빈즈",
    "地球圏統一連合": "지구권 통일 연합",
    "地球連合軍": "지구연합군",
    "地球連邦軍(AGE)": "지구연합군(AGE)",
    "地球連邦軍(X)": "지구연방군(X)",
    "地球連邦軍(00)": "지구연방군(00)",
    "ディアナカウンター": "디아나카운터",
    "ティターンズ": "티탄즈",
    "SDガンダム": "SD건담",
    "鉄華団": "철화단",
    "デビルガンダム軍団": "데빌건담군단",
    "リユース・サイコ・デバイス": "리유즈・사이코・디바이스",
    "トワサンガ": "토와상가",
    "ナノスキン": "나노스킨",
    "ネオ・ジオン": "네오・지온",
    "バルチャー": "벌쳐",
    "フリーデン": "프리덴",
    "ホワイトファング": "화이트팽",
    "ミリシャ": "밀리샤",
    "メガファウナ": "메가파우너",
    "モビル・トレース・システム": "모빌・트레이스・시스템",
    "ユニオン": "유니온",
    "傭兵": "용병",
    "リガ・ミリティア": "리가・밀리티어",


    # --- 시리즈 ---
    "機動戦士ガンダム": "기동전사건담",
    "機動戦士Zガンダム A New Translation": "기동전사Z건담 A New Translation",
    "機動戦士ガンダムZZ": "기동전사 건담ZZ",
    "逆襲のシャア": "역습의샤아",
    "機動武闘伝Gガンダム": "기동무투전 G건담",
    "新機動戦記ガンダムW": "신기동전기 건담W",
    "機動新世紀ガンダムX": "기동신세기 건담X",
    "機動戦士ガンダムSEED": "건담SEED",
    "機動戦士ガンダムSEED DESTINY": "SEED DESTINY",
    "機動戦士ガンダム00": "00",
    "鉄血のオルフェンズ": "칩펀스",
    "水星の魔女": "수마",
    "THE ORIGIN": "THE ORIGIN",
    "MS IGLOO": "MS IGLOO",
    "MS IGLOO 603": "MS IGLOO 603",
    "MS IGLOO2 重力戦線": "MS IGLOO2 중력전선",
    "第08MS小隊": "제08MS소대",
    "CROSS DIMENSION 0079": "CROSS DIMENSION 0079",
    "ガンダム外伝 THE BLUE DESTINY": "건담 외전 THE BLUE DESTINY",
    "ガンダム外伝 ザ・ブルー・ディスティニー": "건담 외전 더 블루 데스티니",
    "ガンダム戦記 Lost War Chronicles": "건담 전기 Lost War Chronicles",
    "ガンダム外伝 ミッシングリンク": "건담 외전 미싱링크",
    "サンダーボルト": "선더 볼트",
    "0080 ポケットの中の戦争": "0080 주머니속의 전쟁",
    "ガンダム戦記 BATTLEFIELD RECORD UC0081": "건담 전기 BATTLEFIELD RECORD UC0081",
    "機動戦士Gundam GQuuuuuuX": "GQuuuuuuX",
    "0083 STARDUST MEMORY": "0083 STARDUST MEMORY",
    "0083 REBELLION": "0083 REBELLION",
    "ファントム・ブレット": "팬텀・불릿",
    "機動戦士ガンダム カタナ": "건담 카나나",
    "エコール・デュ・シエル 天空の学校": "에콜 듀 시엘 천공의학교",
    "ADVANCE OF Z ティターンズの旗のもとに": "ADVANCE OF Z 티탄즈의 깃발 아래에",
    "機動戦士Zガンダム": "기동전사Z건담",
    "機動戦士Zガンダム Define": "기동전사Z건담 Define",
    "ガンダム新体験0087 グリーンダイバーズ": "건담 신체험0087 그린다이버즈",
	"0080 ポケットの中の戦争": "0080 주머니 속의 전쟁",
    
  "MS IGLOO": "MS IGLOO",
  "MS IGLOO 603": "MS IGLOO 603",
  "MS IGLOO2 重力戦線": "MS IGLOO2 중력전선",
  "第08MS小隊": "08MS 소대",
  "CROSS DIMENSION 0079": "CROSS DIMENSION 0079",
  "ガンダム外伝 THE BLUE DESTINY": "건담 외전 THE BLUE DESTINY",
  "ガンダム外伝 ザ・ブルー・ディスティニー": "건담 외전 더 블루 데스티니",
  "ガンダム戦記 Lost War Chronicles": "건담전기 Lost War Chronicles",
  "ガンダム外伝 ミッシングリンク": "건담 외전 미싱 링크",
  "サンダーボルト": "썬더볼트",
  "0080 ポケットの中の戦争": "0080 주머니 속의 전쟁",
  "0083 STARDUST MEMORY": "0083 STARDUST MEMORY",
  "鉄血のオルフェンズ 月鋼":"칩펀스 월강",
  "0083 REBELLION": "0083 REBELLION",
  "機動戦士ガンダムNT": "기동전사 건담 NT",
  "機動戦士ガンダムF90": "기동전사 건담F90",
  "機動戦士Vガンダム": "V건담",
  "∀ガンダム": "턴에이 건담",
  "SDガンダム外伝 ジークジオン編":"SD건담외전 지크지온편",
  "機動戦士ガンダムF91": "기동전사 건담F91",
  "模型戦士ガンプラビルダーズ ビギニング":"모형전사 건프라빌더즈 비기닝",
  "Endless Waltz 敗者たちの栄光": "Endless Waltz 패자의 영광",
  "閃光のハサウェイ": "섬광의하사웨이",
    
    
    
    
    
    "または":"또는",
	"シリーズ":"시리즈",
    "守備値":"수비치",
	"タグ": "태그",
    "シリーズ条件": "시리즈 조건",
    "ガンダム": "건담",
    "ジークアクス": "지쿠악스",
    "地球連邦軍": "지구연방군",
    "反応値": "반응치",
    "条件":"조건",
    "チャンスステップ":"찬스스텝",
    "増加":"증가",
    "覚醒値":"각성치",
    "オート":"오토"
    
    
    
    
	
}




# 타입 번역
typeTranslations = {
    "攻撃": "공격",
    "耐久": "내구",
    "支援": "지원"
}

nameTranslations =  {
  "アムロ": "아무로",
  "レイ": "레이",
  "シャア": "샤아",
  "アズナブル": "아즈나블",
  "シロー": "시로",
  "アマダ": "아마다",
  "ミハイル": "미하일",
  "カミンスキー": "카민스키",
  "ユウ": "유우",
  "カジマ": "카지마",
  "イオ": "이오",
  "フレミング": "플레밍",
  "ダリル": "데릴",
  "ローレンツ": "로렌츠",
  "コウ": "코우",
  "ウラキ": "우라키",
  "アナベル": "아나벨",
  "ガトー": "가토",
  "イットウ": "잇토",
  "ツルギ": "츠루기",
  "アスナ": "아스나",
  "エルマリート": "엘마리트",
  "カミーユ": "카미유",
  "ビダン": "비단",
  "パプテマス": "팝티머스",
  "シロッコ": "시로코",
  "ジュドー": "쥬도",
  "アーシタ": "아시타",
  "ハマーン": "하만",
  "カーン": "칸",
  "バナージ": "버나지",
  "リンクス": "링크스",
  "リディ": "리디",
  "マーセナス": "마세나스",
  "フル": "풀",
  "フロンタル": "프론탈",
  "ヨナ": "요나",
  "バシュタ": "바슈타",
  "ハサウェイ": "하사웨이",
  "ノア": "노아",
  "レーン": "레인",
  "エイム": "에임",
  "シーブック": "시북",
  "アノー": "아노",
  "キンケドゥ": "킨케두",
  "ナウ": "나우",
  "ドモン": "도몬",
  "カッシュ": "캇슈",
  "デュオ": "듀오",
  "マックスウェル": "맥스웰",
  "キラ": "키라",
  "ヤマト": "야마토",
  "アスラン": "아스란",
  "ザラ": "자라",
  "ラウ": "라우",
  "ル": "르",
  "クルーゼ": "크루제",
  "ラクス": "라크스",
  "クライン": "클라인",
  "シン": "신",
  "アスカ": "아스카",
  "刹那": "세츠나",
  "F": "F",
  "セイエイ": "세이에이",
  "三日月": "미카즈키",
  "オーガス": "아우구스",
  "アルジ": "아르지",
  "ミラージ": "미라지",
  "スレッタ": "슬레타",
  "マーキュリー": "머큐리",
  "ミオリネ": "미오리네",
  "レンブラン": "렘블랑",
  "レイジ": "레이지",
  "モンスターブラックドラゴン": "몬스터 블랙 드래곤",
  "劉備ユニコーンガンダム": "유비 유니콘 건담",
  "マーク": "마크",
  "ギルダー": "길더",
  "ドズル": "도즐",
  "ザビ": "자비",
  "マツナガ": "마츠나가",
  "ジョニー": "조니",
  "ライデン": "라이덴",
  "デメジエール": "데메지에르",
  "ソンネン": "손넨",
  "ジャン": "장",
  "リュック": "뤽",
  "デュバル": "뒤발",
  "バーナード": "버나드",
  "ワイズマン": "와이즈먼",
  "クリスチーナ": "크리스티나",
  "マッケンジー": "맥켄지",
  "ボルク": "보르크",
  "クライ": "크라이",
  "ヘンリー": "헨리",
  "ブーン": "븐",
  "ニムバス": "님버스",
  "シュターゼン": "슈타젠",
  "アマテ": "아마테",
  "ユズリハ": "유즈리하",
  "シュウジ": "슈우지",
  "イトウ": "이토",
  "シイコ": "시이코",
  "スガイ": "스가이",
  "ガイア": "가이아",
  "オルテガ": "오르테가",
  "ドゥー": "두",
  "ムラサメ": "무라사메",
  "エグザベ": "엑자베",
  "オリベ": "오리베",
  "シャリア": "샤리아",
  "ブル": "블",
  "ニャアン": "냐안",
  "ケリィ": "케리",
  "レズナー": "레즈너",
  "クワトロ": "크와트로",
  "バジーナ": "버지나",
  "エルピー": "엘피",
  "プル": "플",
  "ラカン": "라칸",
  "ダカラン": "다카란",
  "レッド": "레드",
  "ウェイライン": "웨이라인",
  "レズン": "레즌",
  "シュナイダー": "슈나이더",
  "アンジェロ": "안젤로",
  "ザウパー": "자우퍼",
  "ダグザ": "다구자",
  "マックール": "맥클",
  "デフ": "데프",
  "スタリオン": "스탈리온",
  "チボデー": "치보데",
  "クロケット": "크로켓",
  "サイ": "사이",
  "サイシー": "사이시",
  "ジョルジュ": "죠르쥬",
  "ド": "드",
  "サンド": "상드",
  "アルゴ": "아르고",
  "ガルスキー": "갈스키",
  "ヒイロ": "히이로",
  "ユイ": "유이",
  "カトル": "카토르",
  "ラバーバ": "라버바",
  "ウィナー": "위너",
  "オデル": "오델",
  "バーネット": "버넷",
  "ソリス": "솔리스",
  "アルモニア": "알모니아",
  "エニル": "에닐",
  "エル": "엘",
  "ポゥ": "포",
  "エイジ": "에이지",
  "イザーク": "이자크",
  "ジュール": "쥴",
  "カガリ": "카가리",
  "ユラ": "유라",
  "アスハ": "아스하",
  "エドワード": "에드워드",
  "ハレルソン": "해럴슨",
  "ロウ": "로우",
  "ギュール": "귤",
  "叢雲劾": "무라쿠모 가이",
  "ロンド": "론드",
  "ギナ": "기나",
  "サハク": "사하크",
  "ルナマリア": "루나마리아",
  "ホーク": "호크",
  "ザ": "자",
  "バレル": "바렐",
  "ディアッカ": "디아카",
  "エルスマン": "앨스먼",
  "ミーア": "미아",
  "キャンベル": "캠벨",
  "アンドリュー": "앤드류",
  "バルトフェルド": "발트펠드",
  "シャル": "샬",
  "アクスティカ": "아쿠스티카",
  "グラーベ": "그라베",
  "ヴィオレント": "비올렌토",
  "ビサイド": "비사이드",
  "ペイン": "페인",
  "エイミー": "에이미",
  "ジンバリスト": "짐발리스트",
  "アミダ": "아미다",
  "アルカ": "아르카",
  "カルタ": "카르타",
  "イシュー": "이슈",
  "イオク": "이오쿠",
  "クジャン": "쿠잔",
  "ジュリエッタ": "줄리에타",
  "ジュリス": "쥬리스",
  "サンポ": "삼포",
  "ハクリ": "하쿠리",
  "ザディエル": "자디엘",
  "ザルムフォート": "자름포트",
  "デイラ": "데이라",
  "ナディラ": "나디라",
  "ウィスタリオ": "위스타리오",
  "アファム": "아팜",
  "グエル": "구엘",
  "ジェターク": "제타크",
  "ソフィ": "소피",
  "プロネ": "플로네",
  "ノレア": "노레아",
  "デュノク": "듀노크",
  "イレイ": "이레이",
  "ハル": "하루",
  "ノヤマ": "노야마",
  "リナ": "리나",
  "武者頑駄無": "무사 건담",
  "騎士ジオング": "기사 지옹",
  "騎士サザビー": "기사 사자비",
  "魔王サタンガンダム": "마왕 사탄 건담",
  "騎士ガンダム": "나이트 건담",
  "コマンドガンダム": "커맨드 건담",
  "ゼロ": "제로",
  "セイラ": "세이라",
  "マス": "마스",
  "スレッガー": "슬레거",
  "ララァ": "라라아",
  "スン": "슨",
  "デニム": "데님",
  "アカハナ": "딸기코",
  "ランバ": "람바",
  "ラル": "랄",
  "マ": "마",
  "クベ": "쿠베",
  "マッシュ": "맛슈",
  "ガルマ": "가르마",
  "ハーディ": "하디",
  "シュタイナー": "슈타이너",
  "ガブリエル": "가브리엘",
  "ラミレス": "라미레스",
  "ガルシア": "가르시아",
  "アンディ": "앤디",
  "ストロース": "스트라우스",
  "フィリップ": "필립",
  "ヒューズ": "휴즈",
  "サマナ": "서머너",
  "フュリス": "퓨리스",
  "マリオン": "마리온",
  "ウェルチ": "웰치",
  "ボカタ": "보카타",
  "ゲーツ": "게이츠",
  "キャパ": "캐퍼",
  "チャック": "척",
  "キース": "키스",
  "サウス": "사우스",
  "バニング": "버닝",
  "アルファ": "알파",
  "A": "A.",
  "ベイト": "베이트",
  "ベルナルド": "베르나르도",
  "モンシア": "몬시아",
  "チャップ": "챕",
  "アデル": "아델",
  "カリウス": "카리우스",
  "シーマ": "시마",
  "ガラハウ": "가라하우",
  "レコア": "레코아",
  "ファ": "화",
  "ユイリィ": "유이리",
  "エマ": "에마",
  "シーン": "신",
  "カツ": "카츠",
  "コバヤシ": "코바야시",
  "ジェリド": "제리드",
  "メサ": "메사",
  "マウアー": "마우어",
  "ファラオ": "파라오",
  "サラ": "사라",
  "ザビアロフ": "자비아로프",
  "ヤザン": "야잔",
  "ゲーブル": "게이블",
  "ラムサス": "람사스",
  "ハサ": "하사",
  "ダンケル": "단켈",
  "クーパー": "쿠퍼",
  "ロザミア": "로자미아",
  "バダム": "바담",
  "ブラン": "브란",
  "ブルターク": "블루타크",
  "フォウ": "포",
  "ルー": "루",
  "ルカ": "루카",
  "マシュマー": "마슈마",
  "セロ": "세로",
  "イリア": "이리아",
  "パゾム": "파좀",
  "キャラ": "캐라",
  "スーン": "슨",
  "グレミー": "그레미",
  "トト": "토토",
  "プルツー": "플 투",
  "ケーラ": "케라",
  "スゥ": "수",
  "クェス": "퀘스",
  "パラヤ": "파라야",
  "ギュネイ": "규네이",
  "ガス": "거스",
  "マリーダ": "마리다",
  "クルス": "크루스",
  "ナイジェル": "나이젤",
  "ギャレット": "가렛",
  "マッギネス": "맥기네스",
  "ワッツ": "와츠",
  "ステップニー": "스테프니",
  "ギルボア": "길보아",
  "サント": "산트",
  "ロニ": "로니",
  "ガーベイ": "가베이",
  "ヨンム": "욘무",
  "カークス": "커크스",
  "ガエル": "가엘",
  "チャン": "창",
  "フェンサー": "펜서",
  "メイン": "메인",
  "ガウマン": "가우만",
  "ノビル": "노빌",
  "エメラルダ": "에메랄다",
  "ズービン": "주빈",
  "レイモンド": "레이몬드",
  "ケイン": "케인",
  "シュバルツ": "슈바르츠",
  "ブルーダー": "브루더",
  "レイン": "레인",
  "ミカムラ": "미카무라",
  "ウルベ": "우르베",
  "イシカワ": "이시카와",
  "ジェントル": "젠틀",
  "チャップマン": "채프먼",
  "キラル": "키랄",
  "メキレル": "메키렐",
  "ミケロ": "미켈로",
  "チャリオット": "채리엇",
  "アレンビー": "아렌비",
  "ビアズリー": "비어즐리",
  "トロワ": "트로와",
  "バートン": "버튼",
  "張 五飛": "창 우페이",
  "ゼクス": "젝스",
  "マーキス": "마키스",
  "ミリアルド": "밀리아르도",
  "ピースクラフト": "피스크래프트",
  "ルクレツィア": "루크레치아",
  "ノイン": "노인",
  "トレーズ": "트레즈",
  "クシュリナーダ": "크슈리나다",
  "ガロード": "가로드",
  "ラン": "란",
  "ウィッツ": "윗츠",
  "スー": "수",
  "ロアビィ": "로아비",
  "ロイ": "로이",
  "ジャミル": "쟈밀",
  "ニート": "니트",
  "カリス": "카리스",
  "ノーティラス": "노틸러스",
  "シャギア": "샤기아",
  "フロスト": "프로스트",
  "オルバ": "오르바",
  "ムウ": "무우",
  "ラ": "라",
  "フラガ": "프라가",
  "オルガ": "올가",
  "サブナック": "사브낙",
  "クロト": "클로토",
  "ブエル": "브엘",
  "シャニ": "샤니",
  "アンドラス": "앤드러스",
  "ニコル": "니콜",
  "アマルフィ": "아말피",
  "ミゲル": "미겔",
  "アイマン": "아이만",
  "アサギ": "아사기",
  "コードウェル": "콜드웰",
  "ジュリ": "쥬리",
  "ウー": "우",
  "ニェン": "니엔",
  "マユラ": "마유라",
  "ラバッツ": "라바트",
  "シホ": "시호",
  "ハーネンフース": "하넨프스",
  "リーアム": "리암",
  "ガーフィールド": "가필드",
  "イライジャ": "이라이자",
  "キール": "킬",
  "マリーン": "마를린",
  "蘊": "운",
  "奥": "노우",
  "メイア": "메이어",
  "シヴァ": "시바",
  "アラン": "앨런",
  "ローランド": "롤랜드",
  "ハイネ": "하이네",
  "ヴェステンフルス": "베스텐플루스",
  "ネオ": "네오",
  "ロアノーク": "로아노크",
  "スティング": "스팅",
  "オークレー": "오클레이",
  "ステラ": "스텔라",
  "ルーシェ": "루셰",
  "アウル": "아울",
  "ニーダ": "니더",
  "アレックス": "알렉스",
  "ディノ": "디노",
  "ヒルダ": "힐다",
  "ハーケン": "하켄",
  "ヘルベルト": "허버트",
  "フォン": "폰",
  "ラインハルト": "라인하르트",
  "マーズ": "마즈",
  "シメオン": "시므온",
  "ロックオン": "록온",
  "ストラトス": "스트라토스",
  "アレルヤ": "알렐루야",
  "ハプティズム": "합티즘",
  "ハレルヤ": "할렐루야",
  "ティエリア": "티에리아",
  "アーデ": "아데",
  "ヨハン": "요한",
  "トリニティ": "트리니티",
  "ミハエル": "미하엘",
  "ネーナ": "네나",
  "アレハンドロ": "알레한드로",
  "コーナー": "코너",
  "グラハム": "그라함",
  "エーカー": "에이커",
  "パトリック": "패트릭",
  "コーラサワー": "콜라사워",
  "セルゲイ": "세르게이",
  "スミルノフ": "스미르노프",
  "ソーマ": "소마",
  "ピーリス": "필리스",
  "アリー": "아리",
  "アル": "알",
  "サーシェス": "사세스",
  "ビスケット": "비스킷",
  "グリフォン": "그리폰",
  "ユージン": "유진",
  "セブンスターク": "세븐스타크",
  "ノルバ": "노르바",
  "シノ": "시노",
  "昭弘": "아키히로",
  "アルトランド": "앨트랜드",
  "チャド": "채드",
  "チャダーン": "채던",
  "ダンテ": "단테",
  "モグロ": "모그로",
  "ライド": "라이드",
  "マッス": "매스",
  "タカキ": "타카키",
  "ウノ": "우노",
  "デルマ": "델마",
  "アストン": "애스턴",
  "ラフタ": "래프터",
  "フランクランド": "프랭클랜드",
  "アジー": "아지",
  "グルミン": "그루민",
  "マクギリス": "맥길리스",
  "ファリド": "파리드",
  "ガエリオ": "가엘리오",
  "ボードウィン": "보드윈",
  "アイン": "아인",
  "ダルトン": "달튼",
  "クランク": "크랭크",
  "ゼント": "젠트",
  "クダル": "쿠달",
  "カデル": "카델",
  "モンターク": "몬타크",
  "サンドバル": "산드발",
  "ロイター": "로이터",
  "ハッシュ": "허쉬",
  "ミディ": "미디",
  "石動": "이스루기",
  "カミーチェ": "카미체",
  "ヴィダール": "비다르",
  "ユハナ": "유하나",
  "ジャンマルコ": "장마르코",
  "サレルノ": "살레르노",
  "ロザーリオ": "로자리오",
  "レオーネ": "레오네",
  "ナナオ": "나나오",
  "ナロリナ": "나로리나",
  "ザザ": "자자",
  "フォッシル": "파슬",
  "ジジル": "지질",
  "ジジン": "지진",
  "エラン": "엘란",
  "ケレス": "케레스",
  "シャディク": "샤디크",
  "ゼネリ": "제네리",
  "サビーナ": "사비나",
  "ファルディン": "팔딘",
  "レネ": "르네",
  "コスタ": "코스터",
  "イリーシャ": "이리샤",
  "プラノ": "플라노",
  "メイジー": "메이지",
  "メイ": "메이",
  "エナオ": "에나오",
  "ジャズ": "재즈",
  "ラウダ": "라우더",
  "ニール": "닐",
  "ケナンジ": "케난지",
  "アベリー": "에이버리",
  "オルコット": "올컷",
  "フェルシー": "페르시",
  "ロロ": "롤로",
  "戦士ガンキャノン": "전사 건캐논",
  "僧侶ガンタンク": "승려 건탱크",
  "妖精ジムスナイパーカスタム": "요정 짐 스나이퍼 커스텀",
  "騎士グフ": "기사 구프",
  "騎士ギャン": "기사 걍",
  "戦士ザク": "전사 자쿠",
  "戦士ドム": "전사 돔",
  "騎士ゲルググ": "기사 겔구그",
  "カイ": "카이",
  "シデン": "시덴",
  "ハヤト": "하야토",
  "リュウ": "류",
  "ホセイ": "호세이",
  "アポリー": "아폴리",
  "ベイ": "베이",
  "ロベルト": "로베르토",
  "ビーチャ": "비챠",
  "オーレグ": "올레그",
  "ビアンノ": "비안노",
  "イーノ": "이노",
  "アッバーブ": "압바브",
  "モンド": "몬도",
  "アガケ": "아가케",
  "チェーン": "첸",
  "アギ": "아기",
  "ノーム": "노움",
  "バシリコック": "바실리코크",
  "ラシード": "라시드",
  "クラマ": "쿠라마",
  "トール": "톨",
  "ケーニヒ": "케니히",
  "ラッセ": "랏세",
  "アイオン": "아이온",
  "チュアチュリー": "추아츄리",
  "パンランチ": "판런치",
  "ラナロウ": "라나로우",
  "シェイド": "셰이드",
  "エリス": "엘리스",
  "クロード": "클로드",
  "クレア": "클레어",
  "ヒースロー": "히스로",
  "ジュナス": "쥬나스",
  "リアム": "리암",
  "エルンスト": "에른스트",
  "イェーガー": "예거",
  "ケイ": "케이",
  "ニムロッド": "님로드",
  "シェルド": "쉘드",
  "フォーリー": "포리",
  "ビリー": "빌리",
  "ブレイズ": "블레이즈",
  "ニキ": "니키",
  "テイラー": "테일러",
  "ミラ": "미라",
  "ルナ": "루나",
  "フローレンス": "플로렌스",
  "キリシマ": "키리시마",
  "エルフリーデ": "엘프리데",
  "シュルツ": "슐츠",
  "イワン": "이반",
  "イワノフ": "이바노프",
  "エターナ": "에터나",
  "フレイル": "프레일",
  "エイブラム": "에이브람",
  "Ｍ": "M",
  "ラムザット": "람자트",
  "ネリィ": "넬리",
  "オルソン": "올슨",
  "ブラッド": "블러드",
  "ブランド": "브랜드",
  "フリーズ": "프리즈",
  "カチュア": "카츄아",
  "リィス": "리스",
  "シス": "시스",
  "ミットヴィル": "미트빌",
  "ゴート": "고트",
  "ローガン": "로건",
  "シャポー": "샤포",
  "チェレンシィ": "첼린시",
  "アゼリア": "아젤리아",
  "ツィー": "치",
  "レリーレ": "레릴레",
  "アルナイル": "아르나일",
  "デネボラ": "데네볼라",
  "シャヒム": "샤힘",
  "ジュウゾー": "주조",
  "オハラ": "오하라",
  "レッセル": "레셀",
  "ミズカ": "미즈카",
  "サダニ": "사다니",
  "アルマーズ": "알마즈",
  "地球連邦将校": "지구연방 장교",
  "エルヴィン":"엘빈",
  "ホルバイン":"홀바인",
  "ヘンメ":"헨메",
  "ツァリアーノ":"차리아노",
  "ヒデト・ワシヤ":"히데토 와시야",
  "カスペン":"카스펜",
  "モニク":"모니크",
  "マイ":"마이",
  "インパルス":"임펄스",
  "ノイエジール":"노이에질",
  "レクス":"렉스",
  "改修型":"개수형",
  "閃ハサ":"섬광의하사웨이",
  "캘리번":"캘리번",
  "エアリアル":"에어리얼",
  "ミカ":"미카즈키",
  "デスティニー":"데스티니",
  "チュチュ":"츄츄",
  "クランク二尉":"크랭크 중위",
  "妖精ジムスナ":"요정 짐스나이퍼",
  "武者ガンダム":"무사 건담",
  "バーニィ":"바니",
  "クリス":"크리스",
  "ミーシャ":"미샤",
  "キャリバーン":"캘리번",
  "仮面":"가면",
  "サタンガンダム":"사탄 건담"
  
  
  
}
 

def translate_tag(tag):
    return tagTranslations.get(normalize(tag), tag)

def translate_series(series):
    return seriesTranslations.get(normalize(series), series)

def translate_skill(skill_name):
    base = skill_name.split("Lv")[0].replace("【", "").replace("】", "").strip()
    return skillTranslations.get(normalize(base), base)

def translate_type(ctype):
    return typeTranslations.get(normalize(ctype), ctype)

def translate_ability(text):
    """어빌리티 이름/설명을 부분 문자열 매칭으로 번역"""
    norm = normalize(text)
    for jp, kr in abilityTranslations.items():
        if jp in norm:
            norm = norm.replace(jp, kr)
    return norm

def translate_name(jp_name):
    """캐릭터 이름 번역"""
    norm = normalize(jp_name)
    for jp, kr in sorted(nameTranslations.items(), key=lambda x: len(x[0]), reverse=True):
        if jp in norm:
            norm = norm.replace(jp, kr)
    return norm


def parse_characters(html, is_sp=False, start_id=1):
    soup = BeautifulSoup(html, "html.parser")
    characters = []

    for idx, tbody in enumerate(soup.find_all("tbody", class_="chara_tbody"), start=start_id):
        a_tag = tbody.find("a")

        # 아이콘 먼저 추출
        icon = a_tag.find("img")["src"] if a_tag.find("img") else ""

        # 이름 추출 (원문 + 번역)
        for img in a_tag.find_all("img"):
            img.extract()
        jp_name = a_tag.get_text(strip=True)   # 원문
        name = translate_name(jp_name)         # 번역된 이름

        url = a_tag["href"]

        rarity = tbody.get("data-rarity", "")
        ctype = translate_type(tbody.get("data-type", ""))
        source = nameTypeTranslations.get(tbody.get("data-name_type", ""), tbody.get("data-name_type", ""))

        # 시리즈: 문자열 유지 + 번역 적용
        series_raw = tbody.get("data-series", "")
        series_parts = [translate_series(s.strip()) for s in series_raw.split(",") if s.strip()]
        series_str = ", ".join(series_parts)

        tags = [translate_tag(t.strip()) for t in tbody.get("data-tag", "").split(",")]
        cs = tbody.get("data-chance_step", "")
        atk = tbody.get("data-support_atk", "")
        defense = tbody.get("data-support_def", "")

        # 스탯
        stat_tr = tbody.find_all("tr")[1].find_all("td")
        stats = {
            "shoot": int(stat_tr[0].text),
            "melee": int(stat_tr[1].text),
            "awake": int(stat_tr[2].text),
            "guard": int(stat_tr[3].text),
            "react": int(stat_tr[4].text),
        }

        # 스킬과 어빌리티 구분
        skills = []
        skillslv = []
        abilities = []
        for skill_div in tbody.select("div.skill_name"):
            popup = skill_div.find("div", class_="pop_up_tippy")
            img = skill_div.find("img")
            icon_url = img["src"] if img else ""
            text = skill_div.get_text(strip=True)

            if popup:
                name_ability = popup.get_text(strip=True)
                tag = popup.get("data-tippy_html")
                desc_div = soup.find("div", {"data-tippy_tag": tag})
                desc = desc_div.get_text("\n", strip=True) if desc_div else ""
                abilities.append({
                    "name": translate_ability(name_ability),  # 번역 적용
                    "jp_name": name_ability,                  # 원문 저장
                    "desc": translate_ability(desc)           # 설명도 번역 적용
                })
            else:
                if text:
                    skills.append({"name": translate_skill(text), "icon": icon_url})
                    skillslv.append(text)

        character = {
            "id": idx,
            "name": name if not is_sp else f"{name} (SP)",        # 번역된 이름
            "jp_name": jp_name if not is_sp else f"{jp_name}(SP)",# 원문
            "icon": icon,
            "url": url,
            "rarity": rarity,
            "type": ctype,  # 한글화된 타입
            "source": source,
            "series": series_str,  # 문자열 유지 + 번역 적용
            "tags": tags,
            "cs": cs,
            "atk": atk,
            "def": defense,
            "is_sp": is_sp,
            "stats": stats,
            "skills": skills,
            "skillslv": skillslv,
            "abilities": abilities
        }
        characters.append(character)

    return characters


if __name__ == "__main__":
    with open("nonsp.html", "r", encoding="utf-8") as f:
        nonsp_html = f.read()
    with open("sp.html", "r", encoding="utf-8") as f:
        sp_html = f.read()

    nonsp_characters = parse_characters(nonsp_html, is_sp=False, start_id=1)
    sp_characters = parse_characters(sp_html, is_sp=True, start_id=len(nonsp_characters)+1)

    characters = nonsp_characters + sp_characters

    with open("characters.json", "w", encoding="utf-8") as f:
        json.dump(characters, f, ensure_ascii=False, indent=2)

    print(f"✅ characters.json 파일이 생성되었습니다! 총 {len(characters)}명 캐릭터가 포함됨")
